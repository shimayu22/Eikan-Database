{% extends './_base.html' %}
{% block content %}
    <h3 class="mt-2">チーム成績</h3>
    {% if team_total_result %}
        <table class="table table-bordered table-hover table-sm table-responsive-lg text-nowrap">
            <thead class="thead-light text-center">
                <tr>
                    <th>年度:期間:地区</th>
                    <th>勝</th>
                    <th>負</th>
                    <th>分</th>
                    <th>得点</th>
                    <th>失点</th>
                    <th>得失</th>
                    <th>ランク</th>
                    <th>打率</th>
                    <th>OPS</th>
                    <th>HR</th>
                    <th>防御率</th>
                    <th><abbr title="(対戦打者-被安打-与四死球-奪三振-失策)/(対戦打者-被本塁打-与四死球-奪三振)">DER</abbr></th>
                    <th>備考</th>
                </tr>
            </thead>
            <tbody class="text-right">
                <tr>
                    <th class="text-center">{{ team_total_result.team_id }}</th>
                    <td>{{ team_total_result.total_win }}</td>
                    <td>{{ team_total_result.total_lose }}</td>
                    <td>{{ team_total_result.total_draw }}</td>
                    <td>{{ team_total_result.score }}</td>
                    <td>{{ team_total_result.run }}</td>
                    <td>{{ team_total_result.score_difference }}</td>
                    <td>{{ team_total_result.team_id.rank }}</td>
                    <td>{{ team_total_result.batting_average }}</td>
                    <td>{{ team_total_result.ops }}</td>
                    <td>{{ team_total_result.hr }}</td>
                    <td>{{ team_total_result.era }}</td>
                    <td>{{ team_total_result.der }}</td>
                    <td class="text-left">
                    {% if team_total_result.team_id.remark %}
                        {{ team_total_result.team_id.remark }}    
                    {% endif %}
                    </td>
                </tr>
            </tbody>
        </table>
        <hr>
        <h3 class="mt-2">打者成績</h3>
        <table class="table table-bordered table-hover table-sm table-responsive-lg text-nowrap">
            <thead class="thead-light text-center">
                <tr>
                    <th>Player</th>
                    <th>備考</th>
                    <th><abbr title="出塁率+長打率">OPS</abbr></th>
                    <th><abbr title="長打率：塁打/打数">SLG</abbr></th>
                    <th><abbr title="出塁率：(安打+四死球)/(打数+四死球)※犠飛を除外">OBP</abbr></th>
                    <th><abbr title="(出塁率*1.8+長打率)/4">GPA</abbr></th>
                    <th><abbr title="打率：安打/打数">AVG</abbr></th>
                    <th><abbr title="打数">AB</abbr></th>
                    <th><abbr title="得点">R</abbr></th>
                    <th><abbr title="安打">H</abbr></th>
                    <th><abbr title="二塁打">2B</abbr></th>
                    <th><abbr title="三塁打">3B</abbr></th>
                    <th><abbr title="本塁打">HR</abbr></th>
                    <th><abbr title="打点">RBI</abbr></th>
                    <th><abbr title="三振">SO</abbr></th>
                    <th><abbr title="四死球">BB</abbr></th>
                    <th><abbr title="犠打">SAC</abbr></th>
                    <th><abbr title="盗塁">SB</abbr></th>
                    <th><abbr title="併殺打">GDP</abbr></th>
                    <th><abbr title="エラー">ER</abbr></th>
                    <th><abbr title="塁打">TB</abbr></th>
                    <th><abbr title="1つ三振するまでに得た四死球：四死球/三振">BB/K</abbr></th>
                    <th><abbr title="四死球取得率：四死球/(打数+四死球+犠打)※犠飛を除外">BB%</abbr></th>
                    <th><abbr title="出塁率-打率">IsoD</abbr></th>
                    <th><abbr title="長打率-打率">IsoP</abbr></th>
                    <th><abbr title="(本塁打*盗塁*2)/(本塁打+盗塁)">P-S</abbr></th>
                </tr>
            </thead>
            <tbody class="text-right">
                {% for ftr in fielder_total_results %}
                <tr>
                    <th><a href="{% url 'eikan:player_detail' ftr.player_id.pk %}">{{ ftr.player_id }}</a></th>
                    <td class="text-left">
                        {% if ftr.player_id.is_ob %}
                            OB 
                        {% endif %} 
                        {% if ftr.player_id.is_active %}
                            現役 
                        {% endif %} 
                        {% if ftr.player_id.is_genius %}
                            天才 
                        {% endif %} 
                        {% if ftr.player_id.remark %}
                            {{ ftr.player_id.remark }}
                        {% endif %}
                    </td>
                    <td>{{ ftr.ops }}</td>
                    <td>{{ ftr.slg }}</td>
                    <td>{{ ftr.obp }}</td>
                    <td>{{ ftr.gpa }}</td>
                    <td>{{ ftr.batting_average }}</td>
                    <td>{{ ftr.at_bat }}</td>
                    <td>{{ ftr.run }}</td>
                    <td>{{ ftr.hit }}</td>
                    <td>{{ ftr.two_base }}</td>
                    <td>{{ ftr.three_base }}</td>
                    <td>{{ ftr.home_run }}</td>
                    <td>{{ ftr.run_batted_in }}</td>
                    <td>{{ ftr.strike_out }}</td>
                    <td>{{ ftr.bb_hbp }}</td>
                    <td>{{ ftr.sacrifice_bunt }}</td>
                    <td>{{ ftr.stolen_base }}</td>
                    <td>{{ ftr.grounded_into_double_play }}</td>
                    <td>{{ ftr.error }}</td>
                    <td>{{ ftr.total_bases }}</td>
                    <td>{{ ftr.bbhp_k }}</td>
                    <td>{{ ftr.bbhp_percent }}</td>
                    <td>{{ ftr.isod }}</td>
                    <td>{{ ftr.isop }}</td>
                    <td>{{ ftr.p_s }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <hr>
        <h3 class="mt-2">投手成績</h3>
        <table class="table table-bordered table-hover table-sm table-responsive-lg text-nowrap">
            <thead class="thead-light text-center">
                <tr>
                    <th>Player</th>
                    <th>備考</th>
                    <th><abbr title="登板数">G</abbr></th>
                    <th><abbr title="先発数">GS</abbr></th>
                    <th><abbr title="投球回数">PI</abbr></th>
                    <th><abbr title="投球数">NP</abbr></th>
                    <th><abbr title="対戦打者">TBF</abbr></th>
                    <th><abbr title="被安打">H</abbr></th>
                    <th><abbr title="奪三振">SO</abbr></th>
                    <th><abbr title="与四死球">BBHP</abbr></th>
                    <th><abbr title="失点">R</abbr></th>
                    <th><abbr title="自責点">ER</abbr></th>
                    <th><abbr title="暴投">WP</abbr></th>
                    <th><abbr title="被本塁打">HR</abbr></th>
                    <th><abbr title="防御率：(自責点*9*3)/(投球回*3)">ERA</abbr></th>
                    <th><abbr title="失点率：(失点*9*3)/(投球回*3)">URA</abbr></th>
                    <th><abbr title="1イニングあたりに出した走者：(被安打+与四死球)*3/(投球回*3)">WHIP</abbr></th>
                    <th><abbr title="1つ四球を出すまでにいくつ三振を取れるか：奪三振/与四死球">K/BB</abbr></th>
                    <th><abbr title="奪三振率：(奪三振*9*3)/(投球回*3)">K/9</abbr></th>
                    <th><abbr title="打者と対戦し奪三振を取る確率：奪三振/対戦打者">K%</abbr></th>
                    <th><abbr title="与四死球率：(与四死球*9*3)/(投球回*3)">BB/9</abbr></th>
                    <th><abbr title="打者と対戦し四死球を与える確率：四死球/対戦打者">BB%</abbr></th>
                    <th><abbr title="被本塁打率：(被本塁打*9*3)/(投球回*3)">HR/9</abbr></th>
                    <th><abbr title="打者と対戦し本塁打を与える確率：被本塁打/対戦打者">HR%</abbr></th>
                    <th><abbr title="出塁した走者に得点を許さなかった割合：(安打+四死球-失点)/(安打+四死球-1.4*本塁打)">LOB%</abbr></th>
                    <th><abbr title="1イニングあたりの投球数：(球数*3)/(投球回*3)">P/IP</abbr></th>
                </tr>
            </thead>
            <tbody class="text-right">
                {% for ptr in pitcher_total_results %}
                <tr>
                    <th><a href="{% url 'eikan:player_detail' ptr.player_id.pk %}">{{ ptr.player_id }}</a></th>
                    <td class="text-center">
                        {% if ptr.player_id.is_ob %}
                            OB 
                        {% endif %} 
                        {% if ptr.player_id.is_active %}
                            現役 
                        {% endif %} 
                        {% if ptr.player_id.is_genius %}
                            天才 
                        {% endif %} 
                        {% if ptr.player_id.remark %}
                            {{ ptr.player_id.remark }}
                        {% endif %}
                    </td>
                    <td>{{ ptr.games }}</td>
                    <td>{{ ptr.games_started }}</td>
                    <td>{{ ptr.innings_pitched }}</td>
                    <td>{{ ptr.number_of_pitch }}</td>
                    <td>{{ ptr.total_batters_faced }}</td>
                    <td>{{ ptr.hit }}</td>
                    <td>{{ ptr.strike_out }}</td>
                    <td>{{ ptr.bb_hbp }}</td>
                    <td>{{ ptr.run }}</td>
                    <td>{{ ptr.earned_run }}</td>
                    <td>{{ ptr.wild_pitch }}</td>
                    <td>{{ ptr.home_run }}</td>
                    <td>{{ ptr.era }}</td>
                    <td>{{ ptr.ura }}</td>
                    <td>{{ ptr.whip }}</td>
                    <td>{{ ptr.k_bbhp }}</td>
                    <td>{{ ptr.k_9 }}</td>
                    <td>{{ ptr.k_percent }}</td>
                    <td>{{ ptr.bbhp_9 }}</td>
                    <td>{{ ptr.p_bbhp_percent }}</td>
                    <td>{{ ptr.hr_9 }}</td>
                    <td>{{ ptr.hr_percent }}</td>
                    <td>{{ ptr.lob_percent }}</td>
                    <td>{{ ptr.p_ip }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="text-center">
            <h4>(登録データが)ないです</h4>
            <p><a href="{% url 'admin:index' %}">管理画面</a>からデータを登録してください。</p>
        </div>
    {% endif %}

{% endblock %}